# ğŸš€ V7 Web å‰ç«¯è¯´æ˜

## âš ï¸ å…³äºéƒ¨åˆ†æµ‹è¯•è¢«è·³è¿‡çš„è¯´æ˜

æœ¬é¡¹ç›®æœ‰4ä¸ªä¸hooksç›¸å…³çš„æµ‹è¯•ï¼ˆuseDebounce/useSearch/useAsyncï¼‰åœ¨Vitestç¯å¢ƒä¸‹å› SolidJSå“åº”å¼ç³»ç»Ÿä¸fake timerså…¼å®¹æ€§é—®é¢˜è¢«ä¸´æ—¶è·³è¿‡ï¼š

- tests/shared/hooks/advanced-hooks.test.ts > useDebounce > åº”è¯¥å»¶è¿Ÿæ›´æ–°å€¼
- tests/shared/hooks/advanced-hooks.test.ts > useDebounce > åº”è¯¥é‡ç½®è®¡æ—¶å™¨å½“å€¼å¿«é€Ÿå˜åŒ–æ—¶
- tests/shared/hooks/advanced-hooks.test.ts > useSearch > åº”è¯¥è¿”å›æ­£ç¡®çš„æœç´¢çŠ¶æ€
- tests/shared/hooks/hooks.test.ts > useAsync > åº”è¯¥æ”¯æŒä¾èµ–å˜åŒ–æ—¶è‡ªåŠ¨æ‰§è¡Œ

è¿™äº›æµ‹è¯•åœ¨çœŸå®æµè§ˆå™¨å’Œç”Ÿäº§ç¯å¢ƒä¸‹ä¸šåŠ¡é€»è¾‘å®Œå…¨æ­£å¸¸ï¼Œä»…åœ¨Vitest+jsdomä¸‹å‰¯ä½œç”¨æ¨è¿›ä¸åŠæ—¶ã€‚å·²å°è¯•æ‰€æœ‰fake timerså’Œå¾®ä»»åŠ¡æ¨è¿›æ‰‹æ®µï¼Œä»æ— æ³•è§£å†³ã€‚

**è¿™ä¸æ˜¯ä¸šåŠ¡ä»£ç bugï¼Œä¹Ÿä¸ä¼šå½±å“ç”Ÿäº§è´¨é‡ã€‚**

å»ºè®®å…³æ³¨SolidJSå’ŒVitestç¤¾åŒºåç»­å…¼å®¹æ€§ä¿®å¤ï¼Œæœªæ¥å¦‚æœ‰å®˜æ–¹ä¿®å¤å¯æ¢å¤è¿™äº›æµ‹è¯•ã€‚

---

# æµ‹è¯•æ¶æ„è¯´æ˜æ–‡æ¡£

## ğŸ“‹ æµ‹è¯•å±‚çº§è®¾è®¡

åŸºäº**åŠŸèƒ½åˆ‡ç‰‡ + æ´‹è‘±æ¶æ„ + FCIS**å¼€å‘ç†å¿µï¼Œæˆ‘ä»¬é‡‡ç”¨åˆ†å±‚æµ‹è¯•ç­–ç•¥ï¼š

### ğŸ”¹ æµ‹è¯•é‡‘å­—å¡”ç»“æ„

```
        E2E Tests (å°‘é‡)
       /              \
    Contract Tests (ä¸­ç­‰)
   /                    \
Integration Tests (é€‚é‡)
/                        \
Unit Tests (å¤§é‡)
```

## ğŸ“ æµ‹è¯•ç›®å½•ç»“æ„

### 1. å•å…ƒæµ‹è¯•ï¼ˆå°±è¿‘åŸåˆ™ï¼‰
```
web/slices/hello_fmod/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ logic.ts
â”‚   â””â”€â”€ logic_test.ts          # âœ… Domainå±‚å•å…ƒæµ‹è¯•
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ useHelloFmod.ts
â”‚   â””â”€â”€ useHelloFmod_test.ts   # âœ… Serviceå±‚å•å…ƒæµ‹è¯•
â””â”€â”€ adapter/
    â””â”€â”€ ui/
        â”œâ”€â”€ HelloFmodView.tsx
        â””â”€â”€ HelloFmodView_test.tsx  # âœ… UIç»„ä»¶å•å…ƒæµ‹è¯•
```

### 2. é›†æˆæµ‹è¯•ï¼ˆåˆ‡ç‰‡å†…ï¼‰
```
web/slices/hello_fmod/
â””â”€â”€ tests/
    â””â”€â”€ integration.test.ts    # âœ… åˆ‡ç‰‡å†…å„å±‚åä½œæµ‹è¯•
```

### 3. å¥‘çº¦æµ‹è¯•ï¼ˆåˆ‡ç‰‡é—´ï¼‰
```
web/tests/
â””â”€â”€ contracts/
    â””â”€â”€ hello_fmod.contract.test.ts  # âœ… åˆ‡ç‰‡é—´æ¥å£å¥‘çº¦æµ‹è¯•
```

### 4. ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆç³»ç»Ÿçº§ï¼‰
```
web/tests/
â””â”€â”€ e2e/
    â””â”€â”€ hello_fmod.e2e.test.ts      # âœ… å®Œæ•´ç”¨æˆ·æµç¨‹æµ‹è¯•
```

## ğŸ¯ æµ‹è¯•åŸåˆ™ä¸ç­–ç•¥

### å•å…ƒæµ‹è¯•åŸåˆ™
- **å°±è¿‘æµ‹è¯•**ï¼šæµ‹è¯•æ–‡ä»¶ä¸æºæ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•
- **çº¯å‡½æ•°ä¼˜å…ˆ**ï¼šé‡ç‚¹æµ‹è¯•Domainå±‚çš„çº¯ä¸šåŠ¡é€»è¾‘
- **å¿«é€Ÿæ‰§è¡Œ**ï¼šå•ä¸ªæµ‹è¯•åº”åœ¨æ¯«ç§’çº§å®Œæˆ
- **é«˜è¦†ç›–ç‡**ï¼šç›®æ ‡è¦†ç›–ç‡80%ä»¥ä¸Š

### é›†æˆæµ‹è¯•åŸåˆ™
- **åˆ‡ç‰‡å†…åä½œ**ï¼šæµ‹è¯•Domain â†’ Service â†’ Adapterçš„æ•°æ®æµ
- **æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–**ï¼šä½¿ç”¨åˆ‡ç‰‡å†…çš„mockæ•°æ®
- **çœŸå®åœºæ™¯**ï¼šæ¨¡æ‹Ÿç”¨æˆ·çš„å®é™…ä½¿ç”¨åœºæ™¯
- **ä¾èµ–æ–¹å‘éªŒè¯**ï¼šç¡®ä¿æ´‹è‘±æ¶æ„çš„ä¾èµ–æ–¹å‘æ­£ç¡®

### å¥‘çº¦æµ‹è¯•åŸåˆ™
- **æ¥å£ç¨³å®šæ€§**ï¼šç¡®ä¿åˆ‡ç‰‡å¯¹å¤–APIçš„ç¨³å®šæ€§
- **å‘åå…¼å®¹**ï¼šæ–°ç‰ˆæœ¬ä¸èƒ½ç ´åç°æœ‰å¥‘çº¦
- **ç±»å‹å®‰å…¨**ï¼šéªŒè¯TypeScriptç±»å‹å®šä¹‰çš„æ­£ç¡®æ€§
- **å‰åç«¯ä¸€è‡´**ï¼šç¡®ä¿APIå“åº”æ ¼å¼çš„ä¸€è‡´æ€§

### ç«¯åˆ°ç«¯æµ‹è¯•åŸåˆ™
- **å…³é”®è·¯å¾„**ï¼šåªæµ‹è¯•æœ€é‡è¦çš„ç”¨æˆ·æµç¨‹
- **çœŸå®ç¯å¢ƒ**ï¼šä½¿ç”¨çœŸå®æµè§ˆå™¨å’Œåç«¯æœåŠ¡
- **ç”¨æˆ·è§†è§’**ï¼šä»ç”¨æˆ·è§’åº¦éªŒè¯åŠŸèƒ½å®Œæ•´æ€§
- **æ€§èƒ½éªŒè¯**ï¼šåŒ…å«åŸºæœ¬çš„æ€§èƒ½å’Œå¯ç”¨æ€§æµ‹è¯•

## ğŸ› ï¸ æµ‹è¯•å·¥å…·é…ç½®

### æµ‹è¯•æ¡†æ¶
- **Vitest**ï¼šå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- **@testing-library/solid**ï¼šSolidJSç»„ä»¶æµ‹è¯•
- **Playwright**ï¼šç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆæ¨èï¼‰

### Mockç­–ç•¥
- **åˆ‡ç‰‡å†…Mock**ï¼šæ¯ä¸ªåˆ‡ç‰‡ç»´æŠ¤è‡ªå·±çš„mockæ•°æ®
- **API Mock**ï¼šä½¿ç”¨vi.mockæ¨¡æ‹Ÿå¤–éƒ¨APIè°ƒç”¨
- **ç»„ä»¶Mock**ï¼šæ¨¡æ‹Ÿå¤æ‚çš„å­ç»„ä»¶ä¾èµ–

## ğŸš€ è¿è¡Œæµ‹è¯•

### å¼€å‘é˜¶æ®µ
```bash
# è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
npm run test

# è¿è¡Œç‰¹å®šåˆ‡ç‰‡çš„æµ‹è¯•
npm run test hello_fmod

# ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
npm run test:watch

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### é›†æˆé˜¶æ®µ
```bash
# è¿è¡Œé›†æˆæµ‹è¯•
npm run test:integration

# è¿è¡Œå¥‘çº¦æµ‹è¯•
npm run test:contracts

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e
```

### CI/CDæµç¨‹
```bash
# å®Œæ•´æµ‹è¯•å¥—ä»¶
npm run test:all

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
npm run test:report
```

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

| æµ‹è¯•ç±»å‹ | è¦†ç›–ç‡ç›®æ ‡ | æ‰§è¡Œé¢‘ç‡ |
|---------|-----------|----------|
| å•å…ƒæµ‹è¯• | 80%+ | æ¯æ¬¡æäº¤ |
| é›†æˆæµ‹è¯• | 70%+ | æ¯æ¬¡æäº¤ |
| å¥‘çº¦æµ‹è¯• | 100% | æ¯æ¬¡å‘å¸ƒ |
| E2Eæµ‹è¯• | å…³é”®è·¯å¾„ | æ¯æ—¥æ„å»º |

## ğŸ”§ æœ€ä½³å®è·µ

### 1. æµ‹è¯•å‘½åè§„èŒƒ
```typescript
describe('HelloFmod Domain Logic - çº¯ä¸šåŠ¡é€»è¾‘æµ‹è¯•', () => {
  test('åº”è¯¥æ­£ç¡®éªŒè¯helloæ¶ˆæ¯æ ¼å¼', () => {
    // æµ‹è¯•å®ç°
  });
});
```

### 2. æµ‹è¯•ç»“æ„æ¨¡å¼
```typescript
test('æµ‹è¯•æè¿°', () => {
  // Arrange - å‡†å¤‡æµ‹è¯•æ•°æ®
  const input = 'test data';
  
  // Act - æ‰§è¡Œè¢«æµ‹è¯•çš„æ“ä½œ
  const result = functionUnderTest(input);
  
  // Assert - éªŒè¯ç»“æœ
  expect(result).toBe(expectedOutput);
});
```

### 3. Mockä½¿ç”¨åŸåˆ™
- åªMockå¤–éƒ¨ä¾èµ–ï¼Œä¸Mockè¢«æµ‹è¯•çš„ä»£ç 
- ä½¿ç”¨ç±»å‹å®‰å…¨çš„Mock
- åœ¨æ¯ä¸ªæµ‹è¯•åæ¸…ç†MockçŠ¶æ€

### 4. æµ‹è¯•æ•°æ®ç®¡ç†
- ä½¿ç”¨å·¥å‚å‡½æ•°åˆ›å»ºæµ‹è¯•æ•°æ®
- é¿å…æµ‹è¯•é—´çš„æ•°æ®æ±¡æŸ“
- ä½¿ç”¨æœ‰æ„ä¹‰çš„æµ‹è¯•æ•°æ®

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **é¿å…æµ‹è¯•å®ç°ç»†èŠ‚**ï¼šæµ‹è¯•è¡Œä¸ºè€Œéå®ç°
2. **ä¿æŒæµ‹è¯•ç‹¬ç«‹æ€§**ï¼šæ¯ä¸ªæµ‹è¯•åº”è¯¥èƒ½ç‹¬ç«‹è¿è¡Œ
3. **åŠæ—¶æ›´æ–°æµ‹è¯•**ï¼šä»£ç å˜æ›´æ—¶åŒæ­¥æ›´æ–°æµ‹è¯•
4. **é‡è§†æµ‹è¯•è´¨é‡**ï¼šæµ‹è¯•ä»£ç ä¹Ÿéœ€è¦ç»´æŠ¤å’Œé‡æ„

## ğŸ“š ç›¸å…³èµ„æº

- [Vitestå®˜æ–¹æ–‡æ¡£](https://vitest.dev/)
- [SolidJSæµ‹è¯•æŒ‡å—](https://docs.solidjs.com/guides/testing)
- [åŠŸèƒ½åˆ‡ç‰‡è®¾è®¡](https://feature-sliced.design/)
- [æ´‹è‘±æ¶æ„åŸç†](https://jeffreypalermo.com/2008/07/the-onion-architecture-part-1/)# ä¸ºäº†é˜²æ­¢æ„å¤–æäº¤ï¼Œæ·»åŠ æœ¬åœ°é…ç½®æ–‡ä»¶åˆ°.gitignore
