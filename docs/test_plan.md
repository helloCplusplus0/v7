# HelloFmod åˆ‡ç‰‡

> ç”Ÿæˆæ—¶é—´: 2025-05-25 11:40:03

## æ¦‚è¿°

è¯¥ç›®å½•åŒ…å« HelloFmod åŠŸèƒ½åˆ‡ç‰‡çš„æ‰€æœ‰ä»£ç ï¼Œéµå¾ªé¢†åŸŸé©±åŠ¨è®¾è®¡å’Œå…­è¾¹å½¢æ¶æ„åŸåˆ™ã€‚

## ç›®å½•ç»“æ„

```
web/slices/hello_fmod/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ types.ts              âœ… ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ logic.ts              âœ… ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ logic_test.ts         âœ… å°±è¿‘å•å…ƒæµ‹è¯•
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ useHelloFmod.ts       âœ… SolidJS Hook
â”‚   â””â”€â”€ useHelloFmod_test.ts  âœ… å°±è¿‘å•å…ƒæµ‹è¯•
â”œâ”€â”€ adapter/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ client.ts         âœ… API å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ endpoints.ts      âœ… ç«¯ç‚¹å®šä¹‰
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ HelloFmodView.tsx âœ… ä¸»è§†å›¾ç»„ä»¶
â”‚       â”œâ”€â”€ HelloFmodView_test.tsx âœ… ç»„ä»¶æµ‹è¯•
â”‚       â””â”€â”€ components/       âœ… å­ç»„ä»¶ç›®å½•
â”œâ”€â”€ integration/              âœ… é«˜æ€§èƒ½é›†æˆ
â”‚   â”œâ”€â”€ contract-sync.ts      âœ… å¥‘çº¦åŒæ­¥
â”‚   â”œâ”€â”€ prefetch.config.ts    âœ… é¢„å–é…ç½®
â”‚   â””â”€â”€ wasm-bindgen/         âœ… WASM ç»‘å®š
â”œâ”€â”€ mock/                     âœ… åˆ‡ç‰‡çº§ Mock
â”‚   â”œâ”€â”€ handlers.ts           âœ… MSW å¤„ç†å™¨
â”‚   â”œâ”€â”€ server.ts             âœ… æœåŠ¡ç«¯ Mock
â”‚   â””â”€â”€ browser.ts            âœ… æµè§ˆå™¨ Mock
â”œâ”€â”€ tests/                    âœ… åˆ‡ç‰‡é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ integration.test.ts   âœ… é›†æˆæµ‹è¯•
â”œâ”€â”€ index.ts                  âœ… å…¬å…± API å…¥å£
â”œâ”€â”€ slice.yaml                âœ… åˆ‡ç‰‡å…ƒä¿¡æ¯
â””â”€â”€ README.md                 âœ… åˆ‡ç‰‡æ–‡æ¡£
```

## ä½¿ç”¨æŒ‡å—

### é¢†åŸŸé€»è¾‘

é¢†åŸŸé€»è¾‘ä½äº `domain/logic.ts`ï¼ŒåŒ…å«çº¯å‡½æ•°å’Œé¢†åŸŸè§„åˆ™ã€‚è¿™äº›å‡½æ•°å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å¯¼å…¥ä½¿ç”¨ï¼Œä¸åŒ…å«å‰¯ä½œç”¨ã€‚

ç¤ºä¾‹ï¼š
```typescript
import { validateHelloFmod } from './domain/logic';

const result = validateHelloFmod(myData);
if (result) {
  // å¤„ç†éªŒè¯é”™è¯¯
}
```

### æœåŠ¡å±‚

æœåŠ¡å±‚é€šè¿‡ `useHelloFmod` hook æä¾›ï¼Œå®ƒå°è£…äº†çŠ¶æ€ç®¡ç†ã€API è°ƒç”¨å’Œå‰¯ä½œç”¨å¤„ç†ã€‚

ç¤ºä¾‹ï¼š
```typescript
import { useHelloFmod } from './service/use_name';

function MyComponent() {
  const { data, loading, error, load } = useHelloFmod();
  
  // åŠ è½½æ•°æ®
  load('some-id');
  
  return (
    <div>
      {loading() ? 'Loading...' : data()?.id}
    </div>
  );
}
```

### API é›†æˆ

API å®¢æˆ·ç«¯ä½äº `adapter/api/client.ts`ï¼Œå®ƒå°è£…äº†æ‰€æœ‰ä¸åç«¯äº¤äº’çš„é€»è¾‘ã€‚

ç¤ºä¾‹ï¼š
```typescript
import { fetchHelloFmod } from './adapter/api/client';

async function loadData() {
  try {
    const data = await fetchHelloFmod('some-id');
    // å¤„ç†æ•°æ®
  } catch (error) {
    // å¤„ç†é”™è¯¯
  }
}
```

### UI ç»„ä»¶

UI ç»„ä»¶ä½äº `adapter/ui/components/view.tsx`ï¼Œæä¾›äº†å¯é‡ç”¨çš„å±•ç¤ºç»„ä»¶ã€‚

ç¤ºä¾‹ï¼š
```typescript
import { HelloFmodView } from './adapter/ui/components/view';

function MyPage() {
  return (
    <div>
      <h1>HelloFmod è¯¦æƒ…</h1>
      <HelloFmodView id="some-id" />
    </div>
  );
}
```

## æµ‹è¯•

- å•å…ƒæµ‹è¯•ä½äºæ¯ä¸ªé¢†åŸŸç»„ä»¶æ—è¾¹çš„ `*_test.ts` æ–‡ä»¶ä¸­
- é›†æˆæµ‹è¯•ä½äº `integration/` ç›®å½•
- ä½¿ç”¨ `mock/` ç›®å½•ä¸­çš„æ¨¡æ‹ŸæœåŠ¡å™¨è¿›è¡Œæœ¬åœ°æµ‹è¯•

## è´¡çŒ®æŒ‡å—

1. éµå¾ªé¢†åŸŸé©±åŠ¨è®¾è®¡åŸåˆ™
2. ä¿æŒé¢†åŸŸé€»è¾‘çº¯å‡€ï¼Œæ²¡æœ‰å‰¯ä½œç”¨
3. å°†å‰¯ä½œç”¨éš”ç¦»åœ¨æœåŠ¡å±‚å’Œé€‚é…å™¨å±‚
4. ä½¿ç”¨æµ‹è¯•éªŒè¯æ‰€æœ‰æ›´æ”¹
5. éµå¾ªé¡¹ç›®çš„ä»£ç æ ·å¼å’Œå‘½åçº¦å®š


 # æµ‹è¯•æ¶æ„è¯´æ˜æ–‡æ¡£

## ğŸ“‹ æµ‹è¯•å±‚çº§è®¾è®¡

åŸºäº**åŠŸèƒ½åˆ‡ç‰‡ + æ´‹è‘±æ¶æ„ + FCIS**å¼€å‘ç†å¿µï¼Œæˆ‘ä»¬é‡‡ç”¨åˆ†å±‚æµ‹è¯•ç­–ç•¥ï¼š

### ğŸ”¹ æµ‹è¯•é‡‘å­—å¡”ç»“æ„

```
        E2E Tests (å°‘é‡)
       /              \
    Contract Tests (ä¸­ç­‰)
   /                    \
Integration Tests (é€‚é‡)
/                        \
Unit Tests (å¤§é‡)
```

## ğŸ“ æµ‹è¯•ç›®å½•ç»“æ„

### 1. å•å…ƒæµ‹è¯•ï¼ˆå°±è¿‘åŸåˆ™ï¼‰
```
web/slices/hello_fmod/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ logic.ts
â”‚   â””â”€â”€ logic_test.ts          # âœ… Domainå±‚å•å…ƒæµ‹è¯•
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ useHelloFmod.ts
â”‚   â””â”€â”€ useHelloFmod_test.ts   # âœ… Serviceå±‚å•å…ƒæµ‹è¯•
â””â”€â”€ adapter/
    â””â”€â”€ ui/
        â”œâ”€â”€ HelloFmodView.tsx
        â””â”€â”€ HelloFmodView_test.tsx  # âœ… UIç»„ä»¶å•å…ƒæµ‹è¯•
```

### 2. é›†æˆæµ‹è¯•ï¼ˆåˆ‡ç‰‡å†…ï¼‰
```
web/slices/hello_fmod/
â””â”€â”€ tests/
    â””â”€â”€ integration.test.ts    # âœ… åˆ‡ç‰‡å†…å„å±‚åä½œæµ‹è¯•
```

### 3. å¥‘çº¦æµ‹è¯•ï¼ˆåˆ‡ç‰‡é—´ï¼‰
```
web/tests/
â””â”€â”€ contracts/
    â””â”€â”€ hello_fmod.contract.test.ts  # âœ… åˆ‡ç‰‡é—´æ¥å£å¥‘çº¦æµ‹è¯•
```

### 4. ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆç³»ç»Ÿçº§ï¼‰
```
web/tests/
â””â”€â”€ e2e/
    â””â”€â”€ hello_fmod.e2e.test.ts      # âœ… å®Œæ•´ç”¨æˆ·æµç¨‹æµ‹è¯•
```

## ğŸ¯ æµ‹è¯•åŸåˆ™ä¸ç­–ç•¥

### å•å…ƒæµ‹è¯•åŸåˆ™
- **å°±è¿‘æµ‹è¯•**ï¼šæµ‹è¯•æ–‡ä»¶ä¸æºæ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•
- **çº¯å‡½æ•°ä¼˜å…ˆ**ï¼šé‡ç‚¹æµ‹è¯•Domainå±‚çš„çº¯ä¸šåŠ¡é€»è¾‘
- **å¿«é€Ÿæ‰§è¡Œ**ï¼šå•ä¸ªæµ‹è¯•åº”åœ¨æ¯«ç§’çº§å®Œæˆ
- **é«˜è¦†ç›–ç‡**ï¼šç›®æ ‡è¦†ç›–ç‡80%ä»¥ä¸Š

### é›†æˆæµ‹è¯•åŸåˆ™
- **åˆ‡ç‰‡å†…åä½œ**ï¼šæµ‹è¯•Domain â†’ Service â†’ Adapterçš„æ•°æ®æµ
- **æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–**ï¼šä½¿ç”¨åˆ‡ç‰‡å†…çš„mockæ•°æ®
- **çœŸå®åœºæ™¯**ï¼šæ¨¡æ‹Ÿç”¨æˆ·çš„å®é™…ä½¿ç”¨åœºæ™¯
- **ä¾èµ–æ–¹å‘éªŒè¯**ï¼šç¡®ä¿æ´‹è‘±æ¶æ„çš„ä¾èµ–æ–¹å‘æ­£ç¡®

### å¥‘çº¦æµ‹è¯•åŸåˆ™
- **æ¥å£ç¨³å®šæ€§**ï¼šç¡®ä¿åˆ‡ç‰‡å¯¹å¤–APIçš„ç¨³å®šæ€§
- **å‘åå…¼å®¹**ï¼šæ–°ç‰ˆæœ¬ä¸èƒ½ç ´åç°æœ‰å¥‘çº¦
- **ç±»å‹å®‰å…¨**ï¼šéªŒè¯TypeScriptç±»å‹å®šä¹‰çš„æ­£ç¡®æ€§
- **å‰åç«¯ä¸€è‡´**ï¼šç¡®ä¿APIå“åº”æ ¼å¼çš„ä¸€è‡´æ€§

### ç«¯åˆ°ç«¯æµ‹è¯•åŸåˆ™
- **å…³é”®è·¯å¾„**ï¼šåªæµ‹è¯•æœ€é‡è¦çš„ç”¨æˆ·æµç¨‹
- **çœŸå®ç¯å¢ƒ**ï¼šä½¿ç”¨çœŸå®æµè§ˆå™¨å’Œåç«¯æœåŠ¡
- **ç”¨æˆ·è§†è§’**ï¼šä»ç”¨æˆ·è§’åº¦éªŒè¯åŠŸèƒ½å®Œæ•´æ€§
- **æ€§èƒ½éªŒè¯**ï¼šåŒ…å«åŸºæœ¬çš„æ€§èƒ½å’Œå¯ç”¨æ€§æµ‹è¯•

## ğŸ› ï¸ æµ‹è¯•å·¥å…·é…ç½®

### æµ‹è¯•æ¡†æ¶
- **Vitest**ï¼šå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- **@testing-library/solid**ï¼šSolidJSç»„ä»¶æµ‹è¯•
- **Playwright**ï¼šç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆæ¨èï¼‰

### Mockç­–ç•¥
- **åˆ‡ç‰‡å†…Mock**ï¼šæ¯ä¸ªåˆ‡ç‰‡ç»´æŠ¤è‡ªå·±çš„mockæ•°æ®
- **API Mock**ï¼šä½¿ç”¨vi.mockæ¨¡æ‹Ÿå¤–éƒ¨APIè°ƒç”¨
- **ç»„ä»¶Mock**ï¼šæ¨¡æ‹Ÿå¤æ‚çš„å­ç»„ä»¶ä¾èµ–

## ğŸš€ è¿è¡Œæµ‹è¯•

### å¼€å‘é˜¶æ®µ
```bash
# è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
npm run test

# è¿è¡Œç‰¹å®šåˆ‡ç‰‡çš„æµ‹è¯•
npm run test hello_fmod

# ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
npm run test:watch

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### é›†æˆé˜¶æ®µ
```bash
# è¿è¡Œé›†æˆæµ‹è¯•
npm run test:integration

# è¿è¡Œå¥‘çº¦æµ‹è¯•
npm run test:contracts

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e
```

### CI/CDæµç¨‹
```bash
# å®Œæ•´æµ‹è¯•å¥—ä»¶
npm run test:all

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
npm run test:report
```

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

| æµ‹è¯•ç±»å‹ | è¦†ç›–ç‡ç›®æ ‡ | æ‰§è¡Œé¢‘ç‡ |
|---------|-----------|----------|
| å•å…ƒæµ‹è¯• | 80%+ | æ¯æ¬¡æäº¤ |
| é›†æˆæµ‹è¯• | 70%+ | æ¯æ¬¡æäº¤ |
| å¥‘çº¦æµ‹è¯• | 100% | æ¯æ¬¡å‘å¸ƒ |
| E2Eæµ‹è¯• | å…³é”®è·¯å¾„ | æ¯æ—¥æ„å»º |

## ğŸ”§ æœ€ä½³å®è·µ

### 1. æµ‹è¯•å‘½åè§„èŒƒ
```typescript
describe('HelloFmod Domain Logic - çº¯ä¸šåŠ¡é€»è¾‘æµ‹è¯•', () => {
  test('åº”è¯¥æ­£ç¡®éªŒè¯helloæ¶ˆæ¯æ ¼å¼', () => {
    // æµ‹è¯•å®ç°
  });
});
```

### 2. æµ‹è¯•ç»“æ„æ¨¡å¼
```typescript
test('æµ‹è¯•æè¿°', () => {
  // Arrange - å‡†å¤‡æµ‹è¯•æ•°æ®
  const input = 'test data';
  
  // Act - æ‰§è¡Œè¢«æµ‹è¯•çš„æ“ä½œ
  const result = functionUnderTest(input);
  
  // Assert - éªŒè¯ç»“æœ
  expect(result).toBe(expectedOutput);
});
```

### 3. Mockä½¿ç”¨åŸåˆ™
- åªMockå¤–éƒ¨ä¾èµ–ï¼Œä¸Mockè¢«æµ‹è¯•çš„ä»£ç 
- ä½¿ç”¨ç±»å‹å®‰å…¨çš„Mock
- åœ¨æ¯ä¸ªæµ‹è¯•åæ¸…ç†MockçŠ¶æ€

### 4. æµ‹è¯•æ•°æ®ç®¡ç†
- ä½¿ç”¨å·¥å‚å‡½æ•°åˆ›å»ºæµ‹è¯•æ•°æ®
- é¿å…æµ‹è¯•é—´çš„æ•°æ®æ±¡æŸ“
- ä½¿ç”¨æœ‰æ„ä¹‰çš„æµ‹è¯•æ•°æ®

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **é¿å…æµ‹è¯•å®ç°ç»†èŠ‚**ï¼šæµ‹è¯•è¡Œä¸ºè€Œéå®ç°
2. **ä¿æŒæµ‹è¯•ç‹¬ç«‹æ€§**ï¼šæ¯ä¸ªæµ‹è¯•åº”è¯¥èƒ½ç‹¬ç«‹è¿è¡Œ
3. **åŠæ—¶æ›´æ–°æµ‹è¯•**ï¼šä»£ç å˜æ›´æ—¶åŒæ­¥æ›´æ–°æµ‹è¯•
4. **é‡è§†æµ‹è¯•è´¨é‡**ï¼šæµ‹è¯•ä»£ç ä¹Ÿéœ€è¦ç»´æŠ¤å’Œé‡æ„

## ğŸ“š ç›¸å…³èµ„æº

- [Vitestå®˜æ–¹æ–‡æ¡£](https://vitest.dev/)
- [SolidJSæµ‹è¯•æŒ‡å—](https://docs.solidjs.com/guides/testing)
- [åŠŸèƒ½åˆ‡ç‰‡è®¾è®¡](https://feature-sliced.design/)
- [æ´‹è‘±æ¶æ„åŸç†](https://jeffreypalermo.com/2008/07/the-onion-architecture-part-1/)